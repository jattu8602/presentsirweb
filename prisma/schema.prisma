generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model Account {
  id                String @id @default(auto()) @map("_id") @db.ObjectId
  /// Field referred in an index, but found no data to define the type.
  provider          Json?
  /// Field referred in an index, but found no data to define the type.
  providerAccountId Json?

  @@unique([provider, providerAccountId])
}

model Attendance {
  id String @id @default(auto()) @map("_id") @db.ObjectId
}

model AttendanceRecord {
  id String @id @default(auto()) @map("_id") @db.ObjectId
}

model Class {
  id String @id @default(auto()) @map("_id") @db.ObjectId
}

model Fee {
  id String @id @default(auto()) @map("_id") @db.ObjectId
}

model FeeRecord {
  id String @id @default(auto()) @map("_id") @db.ObjectId
}

model Invoice {
  id            String @id @default(auto()) @map("_id") @db.ObjectId
  /// Field referred in an index, but found no data to define the type.
  invoiceNumber Json?  @unique
}

model Mark {
  id String @id @default(auto()) @map("_id") @db.ObjectId
}

model Payment {
  id                String   @id @default(auto()) @map("_id") @db.ObjectId
  amount            Float
  createdAt         DateTime @db.Date
  planDuration      BigInt
  planType          String
  razorpayOrderId   String   @unique
  razorpayPaymentId String   @unique
  schoolId          String   @db.ObjectId
  status            String
  updatedAt         DateTime @db.Date
}

model Report {
  id String @id @default(auto()) @map("_id") @db.ObjectId
}

model School {
  id                 String   @id @default(auto()) @map("_id") @db.ObjectId
  approvalStatus     String
  city               String
  createdAt          DateTime @db.Date
  district           String
  email              String
  educationBoard     String   @default("CBSE")
  institutionType    String
  phoneNumber        String
  pincode            String
  planDuration       BigInt
  planType           String
  principalName      String
  principalPhone     String
  registeredName     String
  registrationNumber String
  state              String
  streetAddress      String
  updatedAt          DateTime @db.Date
  userId             String   @unique @db.ObjectId
}

model Session {
  id           String @id @default(auto()) @map("_id") @db.ObjectId
  /// Field referred in an index, but found no data to define the type.
  sessionToken Json?  @unique
}

model Student {
  id     String @id @default(auto()) @map("_id") @db.ObjectId
  /// Field referred in an index, but found no data to define the type.
  userId Json?  @unique
}

model Subscription {
  id String @id @default(auto()) @map("_id") @db.ObjectId
}

model Teacher {
  id       String @id @default(auto()) @map("_id") @db.ObjectId
  /// Field referred in an index, but found no data to define the type.
  email    Json?
  /// Field referred in an index, but found no data to define the type.
  schoolId Json?
  /// Field referred in an index, but found no data to define the type.
  userId   Json?  @unique

  @@unique([email, schoolId])
}

model TeacherOnClass {
  id        String @id @default(auto()) @map("_id") @db.ObjectId
  /// Field referred in an index, but found no data to define the type.
  classId   Json?
  /// Field referred in an index, but found no data to define the type.
  teacherId Json?

  @@unique([teacherId, classId])
}

model TimetableEntry {
  id String @id @default(auto()) @map("_id") @db.ObjectId
}

model User {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  createdAt DateTime @db.Date
  email     String   @unique
  password  String
  role      String
  updatedAt DateTime @db.Date
  username  String   @unique
}

model VerificationToken {
  id         String @id @default(auto()) @map("_id") @db.ObjectId
  /// Field referred in an index, but found no data to define the type.
  identifier Json?
  /// Field referred in an index, but found no data to define the type.
  token      Json?  @unique

  @@unique([identifier, token])
}
